<% breadcrumb :courses, @category %>
<% @title = 'Browse Available Courses' %>

<!-- Find Courses Sidebar -->
<div class="row">
  <div class="col-md-3">
    <%= render 'shared/course_search', path: request.path %>

    <h4>Course Categories</h4>

    <div class="list-group small">
      <% active = 'active' if @category.nil? %>
      <%= link_to 'All Courses', courses_path, class: "list-group-item #{active}" %>
      <% cache @categories do %>
        <% @categories.each do |category| %>
          <% active = category == @category ? 'active' : '' %>
          <%= link_to category.name, courses_category_path(category), class: "list-group-item #{active}" %>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Main Content -->
  <div class="col-md-9">
    <% if @search_term %>
      <p class="text-right text-darkish">Search results for "<%= @search_term %>"</p>
    <% end %>

    <% if @courses.empty? %>
      <p class="text-center text-warning"><em>There are no courses to display.</em></p>
    <% else %>
      <div class="list-group">
        <% @courses.each do |course| %>
          <a href="<%= url_for(course) %>" class="course-item list-group-item">
            <div class="row" title="<%= course.title %>">
              <div class="col-sm-2 col-xs-12">
                <%= image_tag course.image.thumb, class: 'img-responsive course-image', alt: course.title %>
              </div>

              <div class="col-sm-10 col-xs-12" style="padding-left: 0;">
                <h3 class="course-title"><%= truncate course.title, length: 57 %></h3>

                <%= course.category.name %>
                &mdash;
                <%= course.college.name %>
              </div>
            </div>
          </a>
        <% end %>
      </div>
    <% end %>

    <!-- Various pagination options in _pagination.scss -->
    <div class="digg_pagination text-center">
      <%= will_paginate @courses %>
    </div>
  </div>
</div>